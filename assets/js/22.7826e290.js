(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{460:function(t,s,a){t.exports=a.p+"assets/img/pre-render.2898afc6.jpg"},569:function(t,s,a){"use strict";a.r(s);var n=a(56),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"web-性能优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#web-性能优化"}},[t._v("#")]),t._v(" web 性能优化")]),t._v(" "),n("ul",[n("li",[t._v("优化代码本身运行速度")]),t._v(" "),n("li",[t._v("优化程序响应，让用户感觉上变快\n"),n("ul",[n("li",[n("a",{attrs:{href:"https://juejin.cn/post/6922641008106668045#comment",target:"_blank",rel:"noopener noreferrer"}},[t._v("时间切片、延迟渲染"),n("OutboundLink")],1),t._v("等方法使得渲染计算任务的分配更为合理，运行过程始终保持较高的FPS，用户在使用过程中不感觉卡顿")])])])]),t._v(" "),n("h2",{attrs:{id:"首屏优化"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#首屏优化"}},[t._v("#")]),t._v(" 首屏优化")]),t._v(" "),n("p",[t._v("涉及了 DNS、HTTP、DOM 解析、CSS 阻塞、JavaScript 阻塞等技术因素，有一项没处理好就可能导致整个页面的延时。")]),t._v(" "),n("h4",{attrs:{id:"_1-加载渲染层面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-加载渲染层面"}},[t._v("#")]),t._v(" 1.加载渲染层面")]),t._v(" "),n("p",[t._v("预渲染：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(460),alt:"pre-start"}})]),t._v(" "),n("p",[t._v("按需加载：")]),t._v(" "),n("h5",{attrs:{id:"_1-1-缓存"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-缓存"}},[t._v("#")]),t._v(" 1.1 缓存")]),t._v(" "),n("p",[t._v("首次没有缓存")]),t._v(" "),n("h5",{attrs:{id:"_1-2-dns查询"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-dns查询"}},[t._v("#")]),t._v(" 1.2 DNS查询")]),t._v(" "),n("ul",[n("li",[t._v("减少DNS查询")]),t._v(" "),n("li",[t._v("放到一个域名下")])]),t._v(" "),n("h5",{attrs:{id:"_1-3-建立tcp链接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-建立tcp链接"}},[t._v("#")]),t._v(" 1.3 建立tcp链接")]),t._v(" "),n("ul",[n("li",[t._v("复用连接数 请求头加上keep-alive")]),t._v(" "),n("li",[t._v("http2.0 多路复用")])]),t._v(" "),n("h5",{attrs:{id:"_1-4-发送请求"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-发送请求"}},[t._v("#")]),t._v(" 1.4 发送请求")]),t._v(" "),n("ul",[n("li",[t._v("减少cookie体积，不滥用cookie")]),t._v(" "),n("li",[t._v("发送多个HTTP请求，增加域名（可以多发送http请求）和减少DNS查询（减少HTTP请求），进行权衡比较，文件多增加，文件少放到一起")]),t._v(" "),n("li",[t._v("Cache-Control:no-cache 是不发送请求")])]),t._v(" "),n("h5",{attrs:{id:"_1-5-接收响应"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-接收响应"}},[t._v("#")]),t._v(" 1.5 接收响应")]),t._v(" "),n("ul",[n("li",[t._v("ETag：发送请求返回一个304用本地的")]),t._v(" "),n("li",[t._v("gzip压缩")])]),t._v(" "),n("h5",{attrs:{id:"_1-6-接收完成"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-接收完成"}},[t._v("#")]),t._v(" 1.6 接收完成")]),t._v(" "),n("ul",[n("li",[t._v("得到HTML")])]),t._v(" "),n("h5",{attrs:{id:"_1-7-解析html"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-解析html"}},[t._v("#")]),t._v(" 1.7 解析HTML")]),t._v(" "),n("ul",[n("li",[t._v("查看 DOCTYPE html")]),t._v(" "),n("li",[t._v("逐行阅读")]),t._v(" "),n("li",[t._v("发现标签"),n("h1",[n("ul",[n("li",[t._v("Chrome不渲染\n"),n("ul",[n("li",[t._v("因为解析到css后会重新渲染样式，解析完css再渲染页面能避免重复渲染。")])])]),t._v(" "),n("li",[t._v("IE，Firefox直接渲染")])])])])]),t._v(" "),n("h5",{attrs:{id:"_1-8-下载css"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-8-下载css"}},[t._v("#")]),t._v(" 1.8 下载CSS")]),t._v(" "),n("ul",[n("li",[t._v("增加域名,使用CDN（就近访问 ）下载多个css")]),t._v(" "),n("li",[t._v("css放到head里，js放到最后（尽早获取DOM节点）")]),t._v(" "),n("li",[t._v("Chrome会阻塞html渲染，IE不会")]),t._v(" "),n("li",[t._v("可以同时下载8个，并行下载")]),t._v(" "),n("li",[t._v("IE能同时下载4个")])]),t._v(" "),n("h5",{attrs:{id:"_1-9-依次解析css"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-9-依次解析css"}},[t._v("#")]),t._v(" 1.9 依次解析CSS")]),t._v(" "),n("h5",{attrs:{id:"_1-10-看到js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-10-看到js"}},[t._v("#")]),t._v(" 1.10 看到JS")]),t._v(" "),n("ul",[n("li",[t._v("懒加载")]),t._v(" "),n("li",[t._v("有js就下载，不会执行JS")])]),t._v(" "),n("h5",{attrs:{id:"_1-11-下载js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-11-下载js"}},[t._v("#")]),t._v(" 1.11 下载JS")]),t._v(" "),n("ul",[n("li",[t._v("会阻塞HTML")])]),t._v(" "),n("h4",{attrs:{id:"_2-代码编写层面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-代码编写层面"}},[t._v("#")]),t._v(" 2. 代码编写层面")]),t._v(" "),n("h5",{attrs:{id:"_2-1-循环的性能"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-循环的性能"}},[t._v("#")]),t._v(" 2.1 循环的性能")]),t._v(" "),n("p",[t._v("考察 "),n("code",[t._v("for")]),t._v("、"),n("code",[t._v("for...of")]),t._v("、"),n("code",[t._v("for...in")]),t._v("、"),n("code",[t._v("forEach")]),t._v("、"),n("code",[t._v("while")]),t._v("、"),n("code",[t._v("do...while")]),t._v("等")]),t._v(" "),n("p",[t._v("可以使用 "),n("code",[t._v("console.time")]),t._v(" 和 "),n("code",[t._v("console.timeEnd")]),t._v(" 进行测试")]),t._v(" "),n("p",[t._v("遍历的时候是否存在查找原型链的过程")]),t._v(" "),n("p",[n("code",[t._v("v8引擎")]),t._v("新版本针对"),n("strong",[t._v("对象取值")]),t._v("等操作进行了最大限度的性能优化。")]),t._v(" "),n("p",[t._v("**其实不管是 forEach 还是 for of  在 v8 中随便用，无需考虑性能问题 **")]),t._v(" "),n("p",[n("code",[t._v("for循环 while循环 for of 循环")]),t._v("是可以通过"),n("code",[t._v("break")]),t._v("关键字跳出的，而"),n("code",[t._v("forEach map")]),t._v("这种循环是无法跳出的。")]),t._v(" "),n("p",[t._v("取值循环（列表渲染）：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" persons "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'1'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'2'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'4'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'5'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'6'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方法一 第二快")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" persons"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("persons"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方法二")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" len "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" persons"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" len"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("persons"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方法三")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" person"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" person "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" persons"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("person"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 方法四 平局使用内存最小 速度最快")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 只创建了一个变量 i")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" i "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" persons"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" i"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("persons"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("i"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n")])])]),n("h5",{attrs:{id:"_2-2-if-else-switch"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-if-else-switch"}},[t._v("#")]),t._v(" 2.2 if...else switch")]),t._v(" "),n("p",[t._v("数组的写法：")]),t._v(" "),n("div",{staticClass:"language-js extra-class"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" statusArr "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 执行")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 进行匹配")]),t._v("\nstatusArr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("a "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),n("ul",[n("li",[n("p",[t._v("1-4 个条件判断还是推荐 "),n("code",[t._v("if-else")]),t._v(" 毕竟性能已经不错了和数组平起平坐。")])]),t._v(" "),n("li",[n("p",[t._v("4-8 个数量 "),n("code",[t._v("switch")]),t._v(" 比 "),n("code",[t._v("if-else")]),t._v(" 好用，但是还是远远不如数组。")])])]),t._v(" "),n("h3",{attrs:{id:"_3-性能监控"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-性能监控"}},[t._v("#")]),t._v(" 3. 性能监控")]),t._v(" "),n("ul",[n("li",[t._v("性能监测"),n("a",{attrs:{href:"https://github.com/GoogleChrome/lighthouse",target:"_blank",rel:"noopener noreferrer"}},[t._v("Lighthouse"),n("OutboundLink")],1),t._v(" "),n("ul",[n("li",[t._v("页面跑分、首屏、PWA、等")])])]),t._v(" "),n("li",[t._v("数据埋点\n"),n("ul",[n("li",[t._v("SDK")])])])])])}),[],!1,null,null,null);s.default=r.exports}}]);