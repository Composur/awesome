(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{338:function(t,s,a){t.exports=a.p+"assets/img/set-cookie.f3ed5f5c.jpg"},339:function(t,s,a){t.exports=a.p+"assets/img/cookie_store.24aead89.jpg"},340:function(t,s,a){t.exports=a.p+"assets/img/send-cookie.356790b3.jpg"},418:function(t,s,a){t.exports=a.p+"assets/img/mvp.19284fa8.jpg"},419:function(t,s,a){t.exports=a.p+"assets/img/hash_router.7c66e05a.jpg"},420:function(t,s,a){t.exports=a.p+"assets/img/history_router.ba75c36c.jpg"},421:function(t,s,a){t.exports=a.p+"assets/img/message_dl.4db875e0.jpg"},422:function(t,s,a){t.exports=a.p+"assets/img/EventLoop.06c6c6a0.jpg"},423:function(t,s,a){t.exports=a.p+"assets/img/block.0bd267e8.jpg"},524:function(t,s,a){"use strict";a.r(s);var e=a(43),v=Object(e.a)({},(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h2",{attrs:{id:"cookie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#cookie"}},[t._v("#")]),t._v(" Cookie")]),t._v(" "),e("blockquote",[e("p",[t._v("Cookie（复数形态Cookies），类型为「小型文本文件」，指某些网站为了辨别用户身份而储存在用户本地终端上的数据。")])]),t._v(" "),e("h4",{attrs:{id:"_1-1-cookie-有什么用"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-cookie-有什么用"}},[t._v("#")]),t._v(" 1.1 Cookie 有什么用？")]),t._v(" "),e("p",[t._v("为了解决 "),e("code",[t._v("HTTP")]),t._v(" 无状态导致的问题中，客户端与服务端会话状态的问题。这个状态单指后端服务的状态而非通信协议的状态。")]),t._v(" "),e("ol",[e("li",[t._v("会话状态管理（如用户登录状态、购物车、游戏分数或其它需要记录的信息）")]),t._v(" "),e("li",[t._v("个性化设置（如用户自定义设置、主题等）")]),t._v(" "),e("li",[t._v("浏览器行为跟踪（如跟踪分析用户行为等）")])]),t._v(" "),e("h4",{attrs:{id:"_1-2-cookie-有哪些部分组成"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-cookie-有哪些部分组成"}},[t._v("#")]),t._v(" 1.2 Cookie 有哪些部分组成？")]),t._v(" "),e("p",[t._v("作为一段一般不超过 4KB 的小型文本数据，它由一个名称（Name）、一个值（Value）和其它几个用于控制 Cookie 有效期、安全性、使用范围的可选属性组成。")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("Name / Value")]),t._v(" "),e("ul",[e("li",[t._v("用 JavaScript 操作 Cookie 的时候注意对 Value 进行编码处理。")])])]),t._v(" "),e("li",[e("p",[t._v("Expirse")]),t._v(" "),e("ul",[e("li",[t._v("用于设置 Cookie 的过期时间。")]),t._v(" "),e("li",[t._v("当 Expires 属性缺省时，表示是会话性 Cookie。关闭浏览器失效。有些浏览器提供了会话恢复功能，这样会保存 Cookie。")]),t._v(" "),e("li",[t._v("过期的时间只与客户端相关，而不是服务端。")])])]),t._v(" "),e("li",[e("p",[t._v("Max-Age")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("用于设置在 Cookie 失效之前需要经过的秒数")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("res"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cookie")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'userid'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("maxAge"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[t._v("Max-Age 可以为正数、负数、甚至是 0。")])]),t._v(" "),e("li",[e("p",[t._v("如果 max-Age 属性为正数时，浏览器会将其持久化，即写到对应的 Cookie 文件中。")])]),t._v(" "),e("li",[e("p",[t._v("当 max-Age 属性为负数，则表示该 Cookie 只是一个会话性 Cookie。")])]),t._v(" "),e("li",[e("p",[t._v("当 max-Age 为 0 时，则会立即删除这个 Cookie。")])]),t._v(" "),e("li",[e("p",[t._v("假如 Expires 和 Max-Age 都存在，Max-Age 优先级更高。")])])])]),t._v(" "),e("li",[e("p",[t._v("Domain")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("指定了 Cookie 可以送达的主机名")])]),t._v(" "),e("li",[e("p",[t._v("没有指定默认是当前主机部分（不含子域名）")]),t._v(" "),e("div",{staticClass:"language-http extra-class"},[e("pre",{pre:!0,attrs:{class:"language-http"}},[e("code",[t._v(".xxx.com\n")])])])])])]),t._v(" "),e("li",[e("p",[t._v("Path")]),t._v(" "),e("ul",[e("li",[t._v("Domain 和 Path 标识共同定义了 Cookie 的作用域：即 Cookie 应该发送给哪些 URL")])])]),t._v(" "),e("li",[e("p",[t._v("Secure")]),t._v(" "),e("ul",[e("li",[t._v("标记为 Secure 的 Cookie 只应通过被 HTTPS 协议加密过的请求发送给服务端")])])]),t._v(" "),e("li",[e("p",[t._v("HTTPOnly")]),t._v(" "),e("ul",[e("li",[t._v("设置 HTTPOnly 属性可以防止客户端脚本通过 document.cookie 等方式访问 Cookie，有助于避免 XSS 攻击。")])])]),t._v(" "),e("li",[e("h4",{attrs:{id:"samesite"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#samesite"}},[t._v("#")]),t._v(" SameSite")]),t._v(" "),e("p",[e("em",[t._v("Chrome80 版本中默认屏蔽了第三方的 Cookie")])]),t._v(" "),e("ul",[e("li",[t._v("SameSite 属性可以让 Cookie 在跨站请求时不会被发送，从而可以阻止跨站请求伪造攻击（CSRF）。\n"),e("ul",[e("li",[e("strong",[t._v("Strict")]),t._v("浏览器将只发送相同站点请求的 Cookie,当前网页 URL 与请求目标 URL 需完全一致。")]),t._v(" "),e("li",[e("strong",[t._v("Lax")]),t._v(" 允许部分第三方请求携带 Cookie")]),t._v(" "),e("li",[e("strong",[t._v("None")]),t._v(" 无论是否跨站都会发送 Cookie")])])]),t._v(" "),e("li",[t._v("之前默认是 None 的，Chrome80 后默认是 Lax。")])])])]),t._v(" "),e("h4",{attrs:{id:"_1-3-如何查看-cookie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-如何查看-cookie"}},[t._v("#")]),t._v(" 1.3 如何查看 Cookie ?")]),t._v(" "),e("ul",[e("li",[t._v("可以在浏览器的开发者工具中查看到当前页面的 Cookie")]),t._v(" "),e("li",[t._v("可以在计算机上查看本机的 Cookies 文件 ("),e("small",[t._v("以 Mac 为例")]),t._v(")\n"),e("ul",[e("li",[t._v("路径为:"),e("code",[t._v("/Users/haizhi/Library/ApplicationSupport/Google/Chrome/Default")])]),t._v(" "),e("li",[t._v("它是一个 "),e("code",[t._v("sqlite")]),t._v(" 数据库文件，可以用 "),e("code",[t._v("sqlite")]),t._v(" 客户端打开查看。")])])])]),t._v(" "),e("h4",{attrs:{id:"_1-4-怎么设置-cookie"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-怎么设置-cookie"}},[t._v("#")]),t._v(" 1.4 怎么设置 Cookie")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("客户端发送 HTTP 请求到服务器")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 登录")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("reqLogin")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("data")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("request")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/login'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'POST'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" data"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[t._v("当服务器收到 HTTP 请求时，在响应头里面添加一个 Set-Cookie 字段 ("),e("small",[e("code",[t._v("express")]),t._v(" 为例")]),t._v(")")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("router"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("post")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/login'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// if success")]),t._v("\n  res"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("cookie")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'userid'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" user"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_id"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("maxAge"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("60")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("24")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[t._v("浏览器收到响应后保存下 Cookie")]),t._v(" "),e("p",[t._v("收到响应：")]),t._v(" "),e("p",[e("img",{attrs:{src:a(338),alt:"setCookie"}})]),t._v(" "),e("p",[t._v("保存 Cookie:")]),t._v(" "),e("p",[e("img",{attrs:{src:a(339),alt:"cookie的存储"}})])]),t._v(" "),e("li",[e("p",[t._v("之后对该服务器每一次请求中都通过 Cookie 字段将 Cookie 信息发送给服务器。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(340),alt:"发送Cookie"}})])])]),t._v(" "),e("h4",{attrs:{id:"_1-5-cookie-的缺点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-cookie-的缺点"}},[t._v("#")]),t._v(" 1.5 Cookie 的缺点")]),t._v(" "),e("ul",[e("li",[t._v("大小方向")]),t._v(" "),e("li",[t._v("安全方向")]),t._v(" "),e("li",[t._v("增加请求方向")])]),t._v(" "),e("h2",{attrs:{id:"请求库默认携带-cookie-的情况"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#请求库默认携带-cookie-的情况"}},[t._v("#")]),t._v(" 请求库默认携带 cookie 的情况")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("fetch")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("fetch")]),t._v(" 在默认情况下, 不管是同域还是跨域`` ajax"),e("code",[t._v("请求都不会带上")]),t._v("cookie"),e("code",[t._v(", 只有当设置了")]),t._v("credentials"),e("code",[t._v("时才会带上该")]),t._v("ajax"),e("code",[t._v("请求所在域的")]),t._v("cookie"),e("code",[t._v(", 服务端需要设置响应头")]),t._v("Access-Control-Allow-Credentials: true`, 否则浏览器会因为安全限制而报错, 拿不到响应")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("url"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    credentials"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"include"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// include, same-origin, omit")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// include: 跨域 ajax 带上 cookie")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// same-origin: 仅同域 ajax 带上 cookie")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// omit: 任何情况都不带 cookie")]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[t._v("axios")]),t._v(" "),e("ul",[e("li",[e("code",[t._v("axios")]),t._v(" 和 "),e("code",[t._v("jQuery")]),t._v(" 在同域 "),e("code",[t._v("ajax")]),t._v(" 请求时会带上 "),e("code",[t._v("cookie")]),t._v(", 跨域请求不会, 跨域请求需要设置 "),e("code",[t._v("withCredentials")]),t._v(" 和服务端响应头")])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("axios"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://server.com'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("withCredentials"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])]),t._v(" "),e("h2",{attrs:{id:"mvc-mvp-和-mvvm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#mvc-mvp-和-mvvm"}},[t._v("#")]),t._v(" MVC，MVP 和 MVVM")]),t._v(" "),e("h4",{attrs:{id:"_2-1-mvc"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-mvc"}},[t._v("#")]),t._v(" 2.1 MVC")]),t._v(" "),e("p",[e("em",[t._v("MVC 的意思就是软件可以划分为 3 部分")])]),t._v(" "),e("ul",[e("li",[t._v("视图（View）：用户界面。")]),t._v(" "),e("li",[t._v("控制器（Controller）：业务逻辑")]),t._v(" "),e("li",[t._v("模型（Model）：数据保存")])]),t._v(" "),e("p",[t._v("通信流程为：View--Controller--Model--View 循环进行，"),e("strong",[t._v("所有通信都是单向的")]),t._v("。")]),t._v(" "),e("ol",[e("li",[t._v("View 传送指令到 Controller")]),t._v(" "),e("li",[t._v("Controller 完成业务逻辑后，要求 Model 改变状态")]),t._v(" "),e("li",[t._v("Model 将新的数据发送到 View，用户得到反馈")])]),t._v(" "),e("h4",{attrs:{id:"_2-2-mvp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-mvp"}},[t._v("#")]),t._v(" 2.2 MVP")]),t._v(" "),e("p",[t._v("MVP 模式将 Controller 改名为 Presenter（主持人），同时改变了通信方向。")]),t._v(" "),e("img",{staticStyle:{zoom:"50%"},attrs:{src:a(418),alt:"mvp"}}),t._v(" "),e("ol",[e("li",[e("p",[t._v("各部分之间的通信，都是双向的。")])]),t._v(" "),e("li",[e("p",[t._v("View 与 Model 不发生联系，都通过 Presenter 传递。")])]),t._v(" "),e("li",[e("p",[t._v('View 非常薄，不部署任何业务逻辑，称为"被动视图"（Passive View），即没有任何主动性，而 Presenter 非常厚，所有逻辑都部署在那里。')])])]),t._v(" "),e("h4",{attrs:{id:"_2-3-mvvm"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-mvvm"}},[t._v("#")]),t._v(" 2.3 MVVM")]),t._v(" "),e("p",[t._v("MVVM 模式将 Presenter 改名为 ViewModel，基本上与 MVP 模式完全一致。")]),t._v(" "),e("p",[t._v("唯一的区别是，它采用双向绑定（data-binding）：View的变动，自动反映在 ViewModel，反之亦然。")]),t._v(" "),e("h2",{attrs:{id:"前端路由原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#前端路由原理"}},[t._v("#")]),t._v(" 前端路由原理")]),t._v(" "),e("blockquote",[e("p",[t._v("本质是监听 url 的变化，根据匹配的规则动态显示网页，且无需刷新。")])]),t._v(" "),e("ul",[e("li",[e("p",[e("code",[t._v("hash")]),t._v(" 模式")]),t._v(" "),e("ul",[e("li",[t._v("通过 "),e("code",[t._v("hasChange")]),t._v(" 事件监听 "),e("code",[t._v("/#/")]),t._v(" 后面 "),e("code",[t._v("URL")]),t._v(" 的变化跳转到对应的页面。")]),t._v(" "),e("li",[e("code",[t._v("/#/")]),t._v(" 后 "),e("code",[t._v("URL")]),t._v(" 的变化不会向服务端请求数据。")]),t._v(" "),e("li",[t._v("手动刷新当前页面的时候不会触发 "),e("code",[t._v("hasChange")]),t._v(" 事件。")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(419),alt:"hash_router"}})])]),t._v(" "),e("li",[e("p",[e("code",[t._v("history")]),t._v(" 模式")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("html5")]),t._v(" 新模式，比 "),e("code",[t._v("hash")]),t._v(" 模式美观（没有 "),e("code",[t._v("/#/")]),t._v("）")])]),t._v(" "),e("li",[e("p",[t._v("通过调用 "),e("code",[t._v("pushState")]),t._v(" "),e("code",[t._v("go")]),t._v(" 等方法实现跳转。")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("URl")]),t._v(" 改变的时候会向服务端请求，所以部署的时候需要进行重定向。")]),t._v(" "),e("div",{staticClass:"language-sh extra-class"},[e("pre",{pre:!0,attrs:{class:"language-sh"}},[e("code",[t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# nginx config")]),t._v("\n location @router "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            rewrite ^.*$ /index.html "),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("break")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),e("p",[e("img",{attrs:{src:a(420),alt:"history_route"}})]),t._v(" "),e("h2",{attrs:{id:"性能优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#性能优化"}},[t._v("#")]),t._v(" 性能优化")]),t._v(" "),e("p",[t._v("URL 输入发生点啥")]),t._v(" "),e("ul",[e("li",[t._v("DNS 解析过程")]),t._v(" "),e("li",[t._v("HTML词法分析和语法分析，CSS解析")]),t._v(" "),e("li",[t._v("合成图层、合成线程调用光栅化线程池，生成位图后浏览器进程间通信过程，显卡缓存与显示器的关系")])]),t._v(" "),e("h2",{attrs:{id:"react-vs-vue"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#react-vs-vue"}},[t._v("#")]),t._v(" React vs Vue")]),t._v(" "),e("blockquote",[e("p",[t._v("vue 和 react 的核心都是专注于轻量级的视图层，虽然只是解决一个很小的问题，但是它们庞大的生态圈提供了丰富的配套工具")])]),t._v(" "),e("h4",{attrs:{id:"_5-1-相同点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-相同点"}},[t._v("#")]),t._v(" 5.1 相同点")]),t._v(" "),e("ul",[e("li",[t._v("使用 Virtual DOM")]),t._v(" "),e("li",[t._v("提供了响应式 (Reactive) 和组件化 (Composable) 的视图组件。")]),t._v(" "),e("li",[t._v("将注意力集中保持在核心库，而将其他功能如路由和全局状态管理交给相关的库。")])]),t._v(" "),e("h4",{attrs:{id:"_5-2-不同点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-不同点"}},[t._v("#")]),t._v(" 5.2 不同点")]),t._v(" "),e("h5",{attrs:{id:"_5-2-1-设计思想和语法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-1-设计思想和语法"}},[t._v("#")]),t._v(" 5.2 1 设计思想和语法")]),t._v(" "),e("p",[t._v("Vue 渐进式框架，基于可变数据，提供 "),e("code",[t._v("v-model")]),t._v(" 指定支持双向绑定。React 主张函数式编程，单向数据流。")]),t._v(" "),e("p",[t._v("Vue 有模板，可以直观的编写 "),e("code",[t._v("html")]),t._v("。其中"),e("code",[t._v("style")]),t._v(" 标签提供一个可选的 "),e("code",[t._v("scoped")]),t._v(" 属性，为组件内的 "),e("code",[t._v("css")]),t._v(" 提供作用域，控制是对当前组件有效，还是全局组件有效。")]),t._v(" "),e("p",[t._v("React  没有模板，推荐的写法是 "),e("code",[t._v("JSX + inline style")]),t._v(" ，把所有的"),e("code",[t._v("html、css")]),t._v(" 都写到"),e("code",[t._v("js")]),t._v("里。"),e("code",[t._v("jsx")]),t._v("是 "),e("code",[t._v("XML")]),t._v(" 语法编写 "),e("code",[t._v("JavaScript")]),t._v(" 的语法糖。")]),t._v(" "),e("p",[t._v("复用层面：React 可通过高阶组件，Hooks 实现，Vue 用 Mixin 实现。")]),t._v(" "),e("p",[t._v("过渡动画：Vue 有提供，React 原生未提供。")]),t._v(" "),e("p",[t._v("全局组件：Vue 声明一次就可以，React 需要一遍遍引入。")]),t._v(" "),e("p",[t._v("Fragments：Vue 没有（造成更多无用元素的嵌套），React 有。")]),t._v(" "),e("h5",{attrs:{id:"_5-2-2-构建工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-2-构建工具"}},[t._v("#")]),t._v(" 5.2.2 构建工具")]),t._v(" "),e("p",[t._v("构建工具：Vue CLI 可以根据需要删减不需要的功能，便捷，快速。")]),t._v(" "),e("p",[t._v("React 的 "),e("code",[t._v("create-react-app")]),t._v(" 在生成项目的时候不允许任何的配置。这也是 React 的优势。")]),t._v(" "),e("h5",{attrs:{id:"_5-2-3-性能优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-3-性能优化"}},[t._v("#")]),t._v(" 5.2.3 性能优化")]),t._v(" "),e("p",[t._v("Vue 组件自动实现了 ，React 的"),e("code",[t._v("shouldComponentUpdate")]),t._v(" 生命周期要做的事情。")]),t._v(" "),e("p",[t._v("Vue 因为依赖系统的存在，当任意一个数据发生变动的时候，Vue 的每个组件都会知道自己是否需要进行重新绘制。")]),t._v(" "),e("h2",{attrs:{id:"浏览器事件循环"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#浏览器事件循环"}},[t._v("#")]),t._v(" 浏览器事件循环")]),t._v(" "),e("p",[t._v("浏览器每个渲染进程都有一个主线程，主线程非常的繁忙，既要处理 "),e("code",[t._v("DOM")]),t._v(" 又要计算样式，还要处理布局，同时还要处理 "),e("code",[t._v("JavaScript")]),t._v(" 任务以及各种输入事件。为了让这些任务在主线程有条不紊的运行， 这就需要一个系统来统筹调度这些任务，所以就出现了消息队列和事件循环系统。")]),t._v(" "),e("h3",{attrs:{id:"消息队列和事件循环"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#消息队列和事件循环"}},[t._v("#")]),t._v(" 消息队列和事件循环")]),t._v(" "),e("p",[t._v("我们可以使用单线程处理事先安排好的任务：")]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 线程的一次执行")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" a "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 任务一")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" b "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 任务二")]),t._v("\nconsole"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("a"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("b"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 任务三")]),t._v("\n")])])]),e("p",[t._v("但是并不是所有的任务都是事先安排好的，如果这个时候给上面的线程添加一个任务，在运行的时候产生了一个新任务，那么线程就不知道怎么执行了。")]),t._v(" "),e("p",[e("strong",[t._v("要想在线程运行过程中，能接收并执行新的任务，就需要采用事件循环机制")])]),t._v(" "),e("p",[e("strong",[t._v("子线程如何和主线程通信，就需要用到消息队列，它是一种数据结构")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(421),alt:"消息队列"}})]),t._v(" "),e("p",[t._v("主线程循环读取消息队列中的任务，并执行该任务，主线程就这样一直循环执行下去，只要消息队列中有任务，主线程就会去执行。")]),t._v(" "),e("p",[t._v("所以如果有其它线程想要发送任务让主线程执行，只需要把该任务添加到该消息队列中就可以了。")]),t._v(" "),e("p",[e("small",[t._v("由于是多个线程操作同一个消息队列，所以在添加任务和取出任务时还会加上一个同步锁。")])]),t._v(" "),e("p",[e("img",{attrs:{src:a(422),alt:"事件循环"}})]),t._v(" "),e("p",[e("strong",[t._v("渲染进程专门有一个 IO 线程用来接收其他进程传进来的消息")]),t._v(",达到浏览器进程间通信的目的。浏览器是多线程+多进程的。")]),t._v(" "),e("h3",{attrs:{id:"消息队列中的任务类型"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#消息队列中的任务类型"}},[t._v("#")]),t._v(" 消息队列中的任务类型")]),t._v(" "),e("p",[t._v("如输入事件（鼠标滚动、点击、移动）、微任务、文件读写、webSocket、JavaScript 定时器等。")]),t._v(" "),e("p",[t._v("页面事件 JavaScript 执行、解析、DOM、样式计算、布局计算、CSS 动画。")]),t._v(" "),e("p",[t._v("上面的这些事件都是在主线程中执行的，需要在写代码的时候衡量这个事件执行占用的时长，想办法解决单个任务占用主线程较久的问题。")]),t._v(" "),e("h3",{attrs:{id:"页面单线程的缺点"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#页面单线程的缺点"}},[t._v("#")]),t._v(" 页面单线程的缺点")]),t._v(" "),e("h4",{attrs:{id:"如何处理优先级高的任务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何处理优先级高的任务"}},[t._v("#")]),t._v(" 如何处理优先级高的任务")]),t._v(" "),e("p",[t._v("因为消息队列是 "),e("code",[t._v("先进先出")]),t._v(" ，执行完上一个任务才能执行下一个任务。如果某个任务执行 "),e("code",[t._v("DOM")]),t._v(" （触发其它任务塞进来），就会拉长这个任务的执行时间卡住不往下进行。")]),t._v(" "),e("p",[t._v("如果改成异步事件，添加到消息队列的末尾，就会发生时效性的问题，因为前面会有其它的同步任务，需要等到其它任务执行完才能执行这个任务。")]),t._v(" "),e("p",[t._v("这个时候"),e("strong",[t._v("微任务")]),t._v("就出现了。")]),t._v(" "),e("p",[t._v("我们通常把消息队列中的任务成为"),e("strong",[t._v("宏任务")]),t._v("。每个宏任务都包含一个"),e("strong",[t._v("微任务队列")]),t._v("，在执行宏任务的过程中如果 "),e("code",[t._v("DOM")]),t._v(" 有变化，会添加到微任务（异步回调代码）中，这也不会影响宏任务的继续执行。")]),t._v(" "),e("p",[t._v("等这个宏任务的主要功能都执行完，渲染引擎不会去立即执行下一个宏任务，而是执行当前宏任务中的微任务，这样就解决了上述问题。")]),t._v(" "),e("p",[e("small",[t._v("部分css3的动画效果是在合成线程上实现的，不需要主线程介入，所以省去了重排和重绘的过程，这就大大提升了渲染效率。JavaScript都是在在主线程上执行的，所以JavaScript的动画需要主线程的参与，所以效率会大打折扣！")])]),t._v(" "),e("h4",{attrs:{id:"如何解决单任务处理时间久的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何解决单任务处理时间久的问题"}},[t._v("#")]),t._v(" 如何解决单任务处理时间久的问题")]),t._v(" "),e("p",[t._v("因为所有的任务都是在单线程中执行的，每次只能执行一个任务，其它的任务都是等待的状态。前一个任务执行很久，后一个任务就要一直等着。")]),t._v(" "),e("p",[e("img",{attrs:{src:a(423),alt:"阻塞"}})])])}),[],!1,null,null,null);s.default=v.exports}}]);