#### 简单说一说 vuex 使用及其理解？

![img](https://mmbiz.qpic.cn/mmbiz_png/pfCCZhlbMQRYY0ypIkjeGZAEdajHALsicttzFicvxxTOX6Q34AELgZQAYHiboibMDLVwTmsLhBfuk1pA4AOtyG87rw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1)

回答策略：

1、首先给 vuex 下一个定义

+ vuex 是 vue 专用的状态管理库。
+ 它以全局方式集中管理应用的状态，并且可以保证状态变更的可预测性。

2、vuex 解决了哪些问题，解读理念

+ vuex 主要解决的问题是多组件之间状态共享的问题，利用各种组件通信方式，我们虽然能够做到状态共享。但是往往需要在多个组件之间保持状态的一致性，这种模式很容易出现问题，也会使程序逻辑变得复杂。
+ vuex 通过把组件的共享状态抽取出来，以全局单例模式管理。这样任何组件都能用一致的方式获取和修改状态。
+ 响应式的数据也能够保证简洁的单向数据流动，我们的代码将变得更结构化且易维护。

3、什么时候我们需要 vuex

+ 如果我们不打算开发大型单页应用或者我们的应用并没有大量全局的状态需要维护，一个简单的store 模式就足够了

4、你的具体用法

+ 将全局状态放入 state 对象中，它本身一棵状态树，组件中使用 store 实例的 state 访问这些状态
+ 然后有配套的 mutation 方法修改这些状态，并且只能用 mutation 修改状态，在组件中调用commit 方法提交 mutation
+ 如果应用中有异步操作或者复杂逻辑组合，我们需要编写 action，执行结束如果有状态修改仍然需要提交 mutation，组件中调用这些 action 使用 dispatch 方法派发。
+ 最后是模块化，通过 modules 选项组织拆分出去的各个子模块，在访问状态时注意添加子模块的名称；如果子模块有设置 namespace，那么在提交 mutation 和派发 action 时还需要额外的命名空间前缀

5、简述原理，提升层级

+ vuex 在实现单项数据流时需要做到数据的响应式。是借用了 vue 的数据响应化特性实现的。
+ 利用 Vue 将 state 作为 data 对其进行响应化处理，从而使得这些状态发生变化时，能够导致组件重新渲染。



#### **VUE中组件之间的通讯方式**

1. 父子之间的通信
   + props
   + $emit / $on
   + $parent / $children
   + ref
   + $attrs / $listeners
2. 兄弟组件间的通信
   + $parent
   + $root
   + vuex
   + eventbus
3. 跨层级通信
   + eventbus
   + vuex
   + provide / inject

#### **nextTick**

> 在同一个事件循环中，当所有的同步任务执行完毕后，就会执行 nextTick

1. nextTick 是啥 ？

   ```js
   Vue.nextTick( [callback, context] )
   ```

   在下次 DOM 更新循环结束之后执行延迟回调。

   在修改数据之后立即使用这个方法，获取更新后的 DOM。

   ```js
   this.message = 'changed'
     // DOM 还没有更新
   this.$nextTick(function () {
     // DOM 现在更新了
     // `this` 绑定到当前实例
     this.doSomethingElse()
   })
   ```

2. 为什么需要它呢？

   1. 由于 vue 的异步更新策略导致我们对数据的修改不会立刻体现在 dom 变化上。此时如果想要立即获取更新后的dom状态，就需要使用这个方法。

3. 我再什么地方用它呢？

   1. nextTick 方法会在队列中加入一个回调函数，确保该函数在前面的dom操作完成后才调用。
   2. 所以当我们想在修改数据后立即看到 dom 执行结果就需要用到 nextTick 方法。

4. 源码实现

   1. 它会在 callbacks 里面加入我们传入的函数。然后用 timerFunc 异步方式调用它们，首选的异步方式会是 Promise。

#### **vue 响应式理解**

1. 什么是响应式
   1. 数据响应式就是能够使数据变化可以被检测并对这种变化做出响应的机制。
2. 为什么 vue 需要响应式？
   1. mvvm 框架中要解决的一个核心问题是连接数据层和视图层，通过数据驱动应用，数据变化，视图更新。要做到这点的就需要对数据做响应式处理，这样一旦数据发生变化就可以立即做出更新处理。
   2. 以 vue 为例，通过数据响应式加上虚拟 DOM 和 patch 算法。可以使我们只需要操作数据，完全不用接触繁琐的 dom 操作，从而大大提升开发效率，降低开发难度。
3. vue的响应式是怎么实现的？有哪些优缺点？
   1. vue2 中的数据响应式会根据数据类型来做不同处理。
   2. 如果是对象则采用Object.defineProperty() 的方式定义数据拦截。当数据被访问或发生变化时，作出响应；
   3. 如果是数组则通过覆盖该数组原型的方法，扩展它的7个变更方法，使这些方法可以额外的做更新通知，从而作出响应。
   4. 缺点
      1. 比如初始化时的递归遍历会造成性能损失；
      2. 新增或删除属性时需要用户使用 Vue.set/delete 这样特殊的 api 才能生效；
      3. 对于 es6 中新产生的 Map、Set 这些数据结构不支持等问题。
4. vue3 中的响应式的新变化
   1. 利用 ES6 的 Proxy 机制代理要响应化的数据，不需要使用特殊api。



